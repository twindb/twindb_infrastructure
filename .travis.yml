language: python
python: 2.7
install: pip install -U -rrequirements_dev.txt
script:
- tox -e ${TOXENV}
- codecov
env:
  matrix:
  - TOXENV=py27
  - TOXENV=flake8
  - TOXENV=cov
  global:
  - secure: BF/kRF+is09fXJhMPt3sjU30aBxVZzju4gZfoNPEoIp9aSZDvpUz1EPeZATUZ0AKdGHKovM9/mAFx5tmbma9Ig9dn37T2wJwyrS4e8ufzzJwTjugLZ0fghhDc1fdXEIYLE4jzLpmxWOv0+BOkXgptAzORaVkj9vgVCc+mSNO2p3e9cyY1eRjBVCmNNgOV9gSQDwl9g6nDDXx/SHHS1eZfzVQXZK5ZKDR6FWc8kwC/GXlDFUZ/hzF8wYmeDtLUedxStwe1u5JLuV+QO4Tl6LlXEru37z3J2nIvmfqOstiKf+ttOadbCnsXsH07p0M/VvNEc1Mws1I3BOhOSqgbZtNPdo7XHtanfoTp5ftIKDI7GM0ic5oztCXzJR9oPKKx6NocOqKJw+VRPCdcFpnnOBRIZu6GY6bfy0Hr3WtYzD7qEh0264DfkhYkBKoRPLyjegM3WhXeLpuNckOWpnM0fCK0472nZNhOF2wE+PjVepWLMBmt9zOFkh38XGTRtvyaPvaA0s7WdxwI67gA2o3Q70kzOqN9Vm2mgqKQZAkZZSZdY9pUyIkDgiVphh5m5PpN/fkN4q/T9K8c8UjFLb/2CO8qHLnbj1q0jqdhfBLI9+NPR3ewY7raXl+9+dLqVzFdseyodQvLc0loH8uTmC8mbHfuQoWE7LVWdL1e6eFd4jUFpY=
  - secure: FphKmrkg1HFEZLAmFJ9zYb8+bkuZ/bL+05q4lTzdPJSU1++pONjvH6TaeFQJqbTtldtaS0ZxZ6ScQ7INGotS1I4xlYYPHH4CRh2n+2dOOX8NOafld95X91KkdUvSyUePCZtvheGIkuzMkJMvTWawCISsH0zm+rnAHCKLCXw+Nq18/LJxFrt8kVeaAbRdCXy1pB+hCj8UABvIhiZ2M7J0SjD7lJZl+D0P6ET0VlciECfI+GeHyUj3XvMFMHqVzJa0KEFvaoMsfHDkYsr/RaO5I09HFF4f64w7BflahQY2rg5nS/g+/MGw2Z2e1b3uJy/HYNzaqchQGrt0Ym1QAgdNTlYOWF+I9ikwuDgkzC8hQ9+8uJRnlug/Yk2IjLJ7KuVTHVSD6G9eL1evqPwfhKZcRu2u3VyVuyzDBFrgApFWgj6lXyQYm4vTtq2Mty5FMllmpK6FrsxChiGblQiPc4m0PYiRFlNsRyqzHKHqZpr6YYgOcz4YBQhKrtsDS2Ii/k8Q8bbgT73XAIC++fRJtj8fWeyls/PUWJrU/Ehnb2cPRDYzxH6OBfAssCrQnL+R8c92GarnWqrT5CZcd6vcPm8iL6IvDgVHNTrPozoRuPYEazaiuPxb4BrI70dkppqe6Q/7cwnIHvaf4PKEP+pgCJGXlK2kmuczfI/TwLEaYgjrv4w=
  - secure: bC/TZ6PjNjFwEJFAhxqBw+DadjEmKSa1UG1rqMzDJBbf7year1hQWG/7sL0mluTEJPFihHlvqOyj7PJMx3GrnkdQLpv295w2CfH3LaShqaLGfdEbf6BmSfUqa7RAUeyaMmCBGs0Z+ZOmIVYkwZY/ZWd2Zk75iielf0d1OOKuK/nSGAjg80Wwb5s6YoKeRbiWRn0sci6ajYp7oPFGlnSeaHV4s9OUsZ6SMvTkGCiaW/Vkjahk6owH5zY5W0xgfMfpy+aHU74fU/CBYy8yW6TSnOGlAqvNFEjDgF7UNpW7R/oEOPZ1oZM9O5m1qPT2+0jlqfqWtx7HQ3mlLIdwyDGWJGK8Xie5KWqK2ue8arado5S3zVLYR6aRn+wI3wB2yRPbaSVvToIfRtql9zPYbWD9LvmzsSGKmpkyKBpEDHaNTyQQ24vOoCvdLXQ+ha3UVUe7XPEA7rvdFJqqTDEpTpUvod47hSAWd7cLDzKCKElwHMxSB+dZ6kCIElYDlTQcyhmPtXYV+oULNRw/mTb32Za8OGwelKnVjvfTtuj+x9TYaRCoId3xh46AiTSlYaBUxc5G6/eruw/yPpHycbik6tXdNsHjdQ14p8IxOpklieP8pY6xvxl42eYDGYuYFyXWF8PTY1IFAciIEYoAEQsqf0c/bVaCeAK4Sb+tk524KZbOBEk=
deploy:
  on:
    condition: "$TOXENV == py27"
    repo: twindb/twindb_infrastructure
    tags: true
  distributions: sdist bdist_wheel
  password:
    secure: ipJtZdfMtfUaD2W794Ukf2ZehmA880uPz2DMt7tL4VHoB+b514HgbdzheH0Azg04Ucqn/+g57OFtCg4kdkGCxHad8m+hfrnJKug+1CEttRFsFrpflJErnYdc+459X3s3utixxKXlKebv3vtg9VFoYXq7rA5Z5WM3ukshtP2sCK/OsgYEleFHYBIRtjnZy9Ip/IFLeBz4vhZaEkwAUSNW3/BWDCBZTC7EfmBVWDsd1gHLSZn94Ib0lCD4npSWf5y/yv6XrTrSX0ElA2gotNJpWWeb2q85oTAlFETGUolIUUUB4QpZobswB7TWp1R7GD+pPFquuzePPq5ybrp4r8qN1m13C9DZ79oH89ndalpb1ACjqb8F53/xNa8BG318m6p9rSP3xIUI8SBqU/T4QiSGa2f/DZCABEXnkhn3CXNhN1Uho76tWVO9SXOmPavhZ89FF3nqEZewD2udjhepN2+Yax8X6K3DiWPxrVJxJi4no2zZiu6tMITjlTfEy++sKuP5rSOAo5JUSSBGfu5BkSI3MbtLGqx+sJo/6A3PDkj68besrnsMMCNOKTqtYfVDBz76m1f2xZ+z/yWina7nw3O9wTNuCKR9FbVEdy48Hg0O3mGYw400+GynYMqiAigoZvDhNdvFr/Qs0PEmSUpwOwnLYUACwU6cNBW9wEgtHV3rsYs=
  provider: pypi
  user: twindb
