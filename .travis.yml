language: python
python: 2.7

install: pip install -U -rrequirements_dev.txt

script:
  - tox -e ${TOXENV}
  - codecov

env:
    matrix:
        - TOXENV=py27
        - TOXENV=flake8
        - TOXENV=cov
    global:
        - secure: "ohNtihiKQXleMqhTTzoOSMQcobuyg4VTV7g/cRMUmEy4f2lsn8jSQoV2fFvaxzDhuq1ELWTiLuDrE40ydS/YNu4+iDGg1TliBWxh7nSh6PXD6d5IO+RbJYd293kzbMa+5AeNbxftu7bnF6L7BV7QsIkx8NHOMtSnJlaoxnDmrpbFxLXNQV81QwRJy9s/uExM6RO4/SuQmw7jjQrmyc3eSjianN9S/deQDbGvff5md+3POVN1YLSSjiICijHsxvqMQCyPndY/mpm/27yvvQlNeRLyiRaQj+k6ccymT8gR3D+gX1G0lD+67/Yb3gCrH8tkAvIOx7hISH1P83lNqr2HV7oUoEgNaqnjr2tQTHgDwBhm5o3vPA4JaG5gaipUp7B/5GRu9LQQvf4K4gHKwRUvGfFXxsY++GltcFDGAg6w4vyA0utFJRC8E5kFGxU+07i3xp664IKerB5+Gt6b7gw420SKxTsi6WwAoKDo/T7Gt4j8/sUiGr7cla339IY1A83INKSNDH3S+0VXxtJptbcButFPRnhXUtQOw6c1MYribPoeClip4DZzerO7n3+PBsz04WGkNcMFsBjgIUOvCe9HBpVIJijdLgLgBN4F1l7xIOHjkedREECYsU/Kb2vg6CJVvTvFZdjKxs1n6gxOKEFKqR53hwRSJ4fU61mCs3P0kgs="
        - secure: "HkrdTGQMS7jh7g+SegTY/97OTM2dQeXrtgTkcXtj+Tck4K4rUuTd3z6laAyQDz/lCtqDqGRqGm9XXiMtz0HvDZh2SDukxPR+8MLxPGpo4GuwvEYZV/NXUPczIaeUdavEYynh/r0VBepvTfFZl6HpSdOP6uueseO4A5rlrZpNb61nI1UrfDHUgcW7OTWQEtaYlxSY+q6ATXeuZEk14FS52Cvg6fqB6nMzqmWPEKd8U980DPeHa8DNRd2f0PEu57atV3cTdy7oQcHGyLupWNCf0XJO2GyNNujV8iLcTaOYlNCH8G8Ro+MOBb/7qbquJ2AciPLo9l/kK8zPVedGo8HOzQL7RpNtCwTRoom93p/uC/qD72vbOlWdfeKTQTBTZPbg3lEeGqzRmvjM0apM1S7J+Z/dzD0nLMCMsd5t4rOJ1e85CNjjF7BMDW9QkGIBGRsHnntsJJlgmYfrZ28baZ9/CkiYt+0JSnSCi009HstkERJtsoO75gNB6o30jrOdceAtd+d+jTFmwdi4mI3g428PlSQJ/QpE/liWK7c1UoXZq2Wu9pId93XOOZGwou9giUL1QoKtU4dFnrbNWx9wQaHHesbUb/zR+ROllNFPBF5HzaaiopJXReHb28+vUm6YgLixAwNLlsxknjbJwkMycmYhi1Qf8YX9g85nms/7BDbcEPk="
        - secure: "Qgy0CcntO7MUlNEo2/ROKGTiGt8uVFsKY8ZcVlKmjp65kfaK0NZ8jFX6JfAO9db/AT3EYgJqvVfaXmhQk+ZRHZ0bCiLzg8OsMG+J67LKjaBY2rLrBbO8r5GT2Rn3BTFXxONpLSzuUhYkBuJexBIanpnkT083CH/fqL8V940Rjs8Yn6h3zhRi9F94QtjpTS7OtnNddJdoY26Dc7xB05iBxnn1RAz9mfbdXCj0E0DkJLqaBTr68a2JGKZ0fWYczgotOHnz15xrxf815Se3R8N6AW6D9LOv8F2VPpnjKczFmg+fp2yAJHpkYLOazFE1x/22FasLl2gkZ13TnQ9EUepGxAUjut8uT4Zg3ifvbgxMwD4lL8C/DqKxvOO26IZQr4Y2gPr3yOggUCp44Tc8wSyNgIAtiEeGGarZThV9b7/ROBF3GEXlG+MDt+gmxnsZoLEjknUO8WXA+RkjdFru9+ufoIWTFy0RmsvFJiFLQqP72VpJVYfZleEKKNrjV6x2Jtz5rEE1NNI7qz5k5tR4TW069G5/ze55PbVOcfZPiK4kKolgCclwxN12HMF/6UE+Vrbc0lIbUaZQ0AUPsWtx0kcjVt6+hil0Bm7pE8dft8L0Yin+3Heo+VIj5FHuqmErYRXQWpxQc+tuI2tUYnYktqPpcFi3Bl8k7np/1WuU7dCrRsQ="

deploy:
  true:
    condition: $TOXENV == py27
    repo: twindb/twindb_infrastructure
    tags: true
  distributions: sdist bdist_wheel
  password:
    secure: ipJtZdfMtfUaD2W794Ukf2ZehmA880uPz2DMt7tL4VHoB+b514HgbdzheH0Azg04Ucqn/+g57OFtCg4kdkGCxHad8m+hfrnJKug+1CEttRFsFrpflJErnYdc+459X3s3utixxKXlKebv3vtg9VFoYXq7rA5Z5WM3ukshtP2sCK/OsgYEleFHYBIRtjnZy9Ip/IFLeBz4vhZaEkwAUSNW3/BWDCBZTC7EfmBVWDsd1gHLSZn94Ib0lCD4npSWf5y/yv6XrTrSX0ElA2gotNJpWWeb2q85oTAlFETGUolIUUUB4QpZobswB7TWp1R7GD+pPFquuzePPq5ybrp4r8qN1m13C9DZ79oH89ndalpb1ACjqb8F53/xNa8BG318m6p9rSP3xIUI8SBqU/T4QiSGa2f/DZCABEXnkhn3CXNhN1Uho76tWVO9SXOmPavhZ89FF3nqEZewD2udjhepN2+Yax8X6K3DiWPxrVJxJi4no2zZiu6tMITjlTfEy++sKuP5rSOAo5JUSSBGfu5BkSI3MbtLGqx+sJo/6A3PDkj68besrnsMMCNOKTqtYfVDBz76m1f2xZ+z/yWina7nw3O9wTNuCKR9FbVEdy48Hg0O3mGYw400+GynYMqiAigoZvDhNdvFr/Qs0PEmSUpwOwnLYUACwU6cNBW9wEgtHV3rsYs=
  provider: pypi
  user: twindb
